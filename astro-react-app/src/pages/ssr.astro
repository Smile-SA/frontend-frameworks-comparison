---
import type { IData } from "../types/data";

import AsyncHomepage from "../components/AsyncHomepage.astro";
import DynamicLayout from "../layouts/DynamicLayout.astro";

export const prerender = false;

const [cards, openSources, solutions, technologies] = await Promise.all([
  fetch("http://localhost:3333/last").then((r) => r.json()),
  fetch("http://localhost:3333/opensource").then((r) => r.json()),
  fetch("http://localhost:3333/solutions").then((r) => r.json()),
  fetch("http://localhost:3333/technologies").then((r) => r.json()),
]);
const data: IData = {
  cards,
  openSources,
  solutions,
  technologies,
};
---

<DynamicLayout title="Welcome to Astro.">
  <AsyncHomepage data={data} />
</DynamicLayout>
